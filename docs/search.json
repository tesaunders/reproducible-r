[
  {
    "objectID": "slides.html#objective",
    "href": "slides.html#objective",
    "title": "Reproducible and collaborative data science in R",
    "section": "Objective",
    "text": "Objective\nUnlock the full potential of your scripts by making your code reproducible, shareable, and citable.\nhttps://github.com/tesaunders/reproducible-r"
  },
  {
    "objectID": "slides.html#why",
    "href": "slides.html#why",
    "title": "Reproducible and collaborative data science in R",
    "section": "Why?",
    "text": "Why?\nMost R users are not software developers.\nApplying some software development princicples enables you to:\n\nWrite readable, reproducible, maintainable code\nSave time and frustration when using and maintaining code\nReduce duplication for you and your collaborators\nMake your research reusable, transparent, and rigorous"
  },
  {
    "objectID": "slides.html#problem-folders-are-a-mess",
    "href": "slides.html#problem-folders-are-a-mess",
    "title": "Reproducible and collaborative data science in R",
    "section": "Problem: Folders are a mess",
    "text": "Problem: Folders are a mess\n\nCan’t find anything quickly\nFiles are all over the place\nCan’t easily share what I’m working on"
  },
  {
    "objectID": "slides.html#solution-organising-r-code-into-projects",
    "href": "slides.html#solution-organising-r-code-into-projects",
    "title": "Reproducible and collaborative data science in R",
    "section": "Solution: Organising R code into projects",
    "text": "Solution: Organising R code into projects\n\nOrganise all files into consistent folder structures\nBreak long scripts into separate files based on the tasks being performed\nAdd a README file to describe the project"
  },
  {
    "objectID": "slides.html#problem-r-code-is-difficult-to-understand",
    "href": "slides.html#problem-r-code-is-difficult-to-understand",
    "title": "Reproducible and collaborative data science in R",
    "section": "Problem: R code is difficult to understand",
    "text": "Problem: R code is difficult to understand\nMany beginner programmers:\n\nDo not document their code which makes it harder to understand\nRely on assigning objects instead of piping\nAre not aware of how to write their own functions\nGet stuck with how and why to iterate"
  },
  {
    "objectID": "slides.html#solution-write-clean-styled-documented-code",
    "href": "slides.html#solution-write-clean-styled-documented-code",
    "title": "Reproducible and collaborative data science in R",
    "section": "Solution: Write clean, styled, documented code",
    "text": "Solution: Write clean, styled, documented code\n\nUse comments to explain why you did something a particular way\nUse sections and subsections to organise and navigate longer scripts\nUse a consistent style (linting with {styler})\nWrite functions and iterate to do complex things at scale"
  },
  {
    "objectID": "slides.html#problem-difficult-to-collaborate-on-codeanalyses",
    "href": "slides.html#problem-difficult-to-collaborate-on-codeanalyses",
    "title": "Reproducible and collaborative data science in R",
    "section": "Problem: Difficult to collaborate on code/analyses",
    "text": "Problem: Difficult to collaborate on code/analyses\n\nEmailing back and forth is inefficient"
  },
  {
    "objectID": "slides.html#solution-use-a-version-control-system",
    "href": "slides.html#solution-use-a-version-control-system",
    "title": "Reproducible and collaborative data science in R",
    "section": "Solution: Use a version control system",
    "text": "Solution: Use a version control system\n\nGit - software installed on your machine which tracks versions of files\nGitHub - cloud service which allows you to share/collaborate on projects\nAll changes are kept, revertible\nFeatures like issues (to do lists), code review, automatic checks"
  },
  {
    "objectID": "slides.html#problem-code-doesnt-run-after-package-updates",
    "href": "slides.html#problem-code-doesnt-run-after-package-updates",
    "title": "Reproducible and collaborative data science in R",
    "section": "Problem: Code doesn’t run after package updates",
    "text": "Problem: Code doesn’t run after package updates\n\nSometimes updates to packages break code"
  },
  {
    "objectID": "slides.html#solution-manage-dependencies-with-renv",
    "href": "slides.html#solution-manage-dependencies-with-renv",
    "title": "Reproducible and collaborative data science in R",
    "section": "Solution: Manage dependencies with {renv}",
    "text": "Solution: Manage dependencies with {renv}\nrenv takes a snapshot of currently used packages within a project.\n\nA lockfile containing the data can then be added to GitHub.\nWhen someone clones the projects they can use renv to install the same package versions.\nThis makes it far more likley the code will continue to work."
  },
  {
    "objectID": "slides.html#problem-many-researchers-dont-get-credit-for-their-code",
    "href": "slides.html#problem-many-researchers-dont-get-credit-for-their-code",
    "title": "Reproducible and collaborative data science in R",
    "section": "Problem: Many researchers don’t get credit for their code",
    "text": "Problem: Many researchers don’t get credit for their code\nLots of code is:\n\nnot recognised/rewarded as an output of research\nnot easily findble and reusable by others\nnot attached to results to enable reproducibility"
  },
  {
    "objectID": "slides.html#solution-publish-your-code",
    "href": "slides.html#solution-publish-your-code",
    "title": "Reproducible and collaborative data science in R",
    "section": "Solution: Publish your code",
    "text": "Solution: Publish your code\nTwo good options:\n\nGitHub repositories can be connected to Zenodo to get a DOI, OR\nPublish the code or a link to the GitHub repo with FigShare or Zenodo\n\n\nCode is more easily associated with other publications\nCode is citable, and citations can be tracked\nDOIs are persistent records that will always resolve to the right place"
  },
  {
    "objectID": "01_projects.html#create-github-repository-rstudio-project",
    "href": "01_projects.html#create-github-repository-rstudio-project",
    "title": "RStudio Projects",
    "section": "Create GitHub repository & RStudio project",
    "text": "Create GitHub repository & RStudio project\nWe’re going to work in an RStudio project connected to a GitHub repository.\nFirst we create the repository in GitHub:\n\nGo to github.com, sign in, then click the green ‘New’ button.\nName it “r-data-science”, leave the rest as default, then click ‘create repository’.\nCopy the github.com address in the ‘Quick set up box’.\nOpen RStudio and select File -&gt; New project -&gt; Version control -&gt; Git -&gt; and paste the address into the ‘Repository URL’ box.\n\nIn the box called ‘Create project as subdirectory of:’ you need to select a location on your machine. It’s a good idea to create a folder called something like ‘projects’ in your user folder and select this every time, to group your repositories together in the same place on your machine(s). Let’s do that by clicking ‘Browse’, navigating to your user folder, and creating a new folder called ‘projects’ before selecting it and clicking ‘create project’.\nRStudio opens a new project called r-data-science. RStudio projects are essentially the .RProj file - this file tells RStudio that this folder is home to the project, and to use the folder as the ‘working directory’, or the place where R is looking when you ask it to load data or save an output."
  },
  {
    "objectID": "01_projects.html#set-up-folders",
    "href": "01_projects.html#set-up-folders",
    "title": "RStudio Projects",
    "section": "Set up folders",
    "text": "Set up folders\nCreate the following folders from within RStudio:\n\ndata_raw: holds the raw, untouched data.\ndata: holds cleaned data.\nresults: holds outputs like figures or summarised data.\nsrc: holds analysis script(s).\n\nThere are many ways of setting up project folders, but the idea is to pick a convention and stick to it across different projects to stay organised and save time.\nDownload this dataset and put it into data_raw.\nCreate a new R script (Ctrl+Shift+N), call it analysis.R and save it in src."
  },
  {
    "objectID": "02_code.html",
    "href": "02_code.html",
    "title": "R Code",
    "section": "",
    "text": "We can improve our scripts by writing code which is:\n\nReadable\n\n\nUse a consistent style guide (like the tidyverse one)\nBe clear, concise, and consistent when naming objects, datasets, and functions\nBreak your scripts up into sections (Ctrl+Shift+R)\n\n\nReusable\n\n\nWrite functions to perform sets of operations\nUse iteration (for loops, or map())\nConsider creating packages for data and code used in multiple places\nBreak up long scripts into separate files (cleaning, manipulating, plotting)\n\n\nDocumented\n\n\nUse comments to explain why you did something the way you did\nInclude a README with each project to provide important context and background\n\nCreate a new script in RStudio (Ctrl+Shift+N) and save it in the scripts folder.\nLoad packages we need for the workshop.\n\nlibrary(readr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(purrr)\nlibrary(renv)\n\n\nAttaching package: 'renv'\n\n\nThe following object is masked from 'package:purrr':\n\n    modify\n\n\nThe following objects are masked from 'package:stats':\n\n    embed, update\n\n\nThe following objects are masked from 'package:utils':\n\n    history, upgrade\n\n\nThe following objects are masked from 'package:base':\n\n    autoload, load, remove, use\n\n\nLet’s take a common example of some data analysis and apply the above principles when writing the code.\nFirst, let’s read in some data split into different files by month. Instead of naming each file, we can use readr::read_csv() to read them all in at once, bind them together into a single dataframe, and add a new column containing the filename of the data source.\n\nfiles &lt;- list.files(path = \"data_raw\", pattern = \"\\\\.csv\", full.names = TRUE)\n\nsurveys &lt;- read_csv(files, id = \"source\")\n\nRows: 16878 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): species_id, sex, genus, species, taxa, plot_type\ndbl (7): record_id, month, day, year, plot_id, hindfoot_length, weight\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nThis dataset comprises measurements taken from mammals captured in the Chihuahuan desert.\nLet’s say we wanted to create a separate scatterplot for each species showing hindfoot length vs weight. Even if we’re only interested in species codes with at least 100 valid observations, that’s still 11 plots.\n\nvalid_species &lt;-\n  surveys |&gt;\n  drop_na(all_of(c(\"weight\", \"hindfoot_length\"))) |&gt; \n  count(species_id) |&gt; \n  filter(n &gt;= 100) |&gt; \n  pull(species_id)\n\nRather than write out the same code 15 times, this is a good time to write our own function. If we encapsulate all the plotting steps in a function, we can then use {purrr} to apply the function over the species and create the plots.\n\n# Create an example of a plot\nggplot(surveys, aes(x = weight, y = hindfoot_length, colour = sex)) +\n  geom_point() +\n  theme_minimal()\n\nWarning: Removed 3081 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\n\nplot_species &lt;- function(data, x_var, y_var, colour, species) {\n\n  filtered_data &lt;- \n    data |&gt; \n    filter(species_id == {{ species }})\n  \n  plot_title &lt;- paste0(y_var, \" vs. \", x_var, \" for Species ID: \", species)\n  \n  plot &lt;- \n    filtered_data |&gt; \n    ggplot(aes(x = .data[[x_var]], y = .data[[y_var]], colour = .data[[colour]])) +\n    geom_point(alpha = 0.6) +\n    theme_minimal()\n  \n  save_path &lt;- paste0(\"figures/\", species, \"_\", x_var, \"_vs_\", y_var, \".png\")\n  \n  ggsave(save_path, plot = plot, width = 10, height = 6, units = \"in\")\n}\n\nwalk(valid_species, ~ plot_species(\n  data = surveys,\n  x_var = \"weight\",\n  y_var = \"hindfoot_length\",\n  colour = \"sex\",\n  species = .x \n))\n\nWarning: Removed 674 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 153 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 469 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 167 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 87 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 106 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 78 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 94 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 42 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 41 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 122 rows containing missing values or values outside the scale range\n(`geom_point()`)."
  },
  {
    "objectID": "02_code.html#writing-better-code",
    "href": "02_code.html#writing-better-code",
    "title": "R Code",
    "section": "",
    "text": "We can improve our scripts by writing code which is:\n\nReadable\n\n\nUse a consistent style guide (like the tidyverse one)\nBe clear, concise, and consistent when naming objects, datasets, and functions\nBreak your scripts up into sections (Ctrl+Shift+R)\n\n\nReusable\n\n\nWrite functions to perform sets of operations\nUse iteration (for loops, or map())\nConsider creating packages for data and code used in multiple places\nBreak up long scripts into separate files (cleaning, manipulating, plotting)\n\n\nDocumented\n\n\nUse comments to explain why you did something the way you did\nInclude a README with each project to provide important context and background\n\nCreate a new script in RStudio (Ctrl+Shift+N) and save it in the scripts folder.\nLoad packages we need for the workshop.\n\nlibrary(readr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(purrr)\nlibrary(renv)\n\n\nAttaching package: 'renv'\n\n\nThe following object is masked from 'package:purrr':\n\n    modify\n\n\nThe following objects are masked from 'package:stats':\n\n    embed, update\n\n\nThe following objects are masked from 'package:utils':\n\n    history, upgrade\n\n\nThe following objects are masked from 'package:base':\n\n    autoload, load, remove, use\n\n\nLet’s take a common example of some data analysis and apply the above principles when writing the code.\nFirst, let’s read in some data split into different files by month. Instead of naming each file, we can use readr::read_csv() to read them all in at once, bind them together into a single dataframe, and add a new column containing the filename of the data source.\n\nfiles &lt;- list.files(path = \"data_raw\", pattern = \"\\\\.csv\", full.names = TRUE)\n\nsurveys &lt;- read_csv(files, id = \"source\")\n\nRows: 16878 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (6): species_id, sex, genus, species, taxa, plot_type\ndbl (7): record_id, month, day, year, plot_id, hindfoot_length, weight\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nThis dataset comprises measurements taken from mammals captured in the Chihuahuan desert.\nLet’s say we wanted to create a separate scatterplot for each species showing hindfoot length vs weight. Even if we’re only interested in species codes with at least 100 valid observations, that’s still 11 plots.\n\nvalid_species &lt;-\n  surveys |&gt;\n  drop_na(all_of(c(\"weight\", \"hindfoot_length\"))) |&gt; \n  count(species_id) |&gt; \n  filter(n &gt;= 100) |&gt; \n  pull(species_id)\n\nRather than write out the same code 15 times, this is a good time to write our own function. If we encapsulate all the plotting steps in a function, we can then use {purrr} to apply the function over the species and create the plots.\n\n# Create an example of a plot\nggplot(surveys, aes(x = weight, y = hindfoot_length, colour = sex)) +\n  geom_point() +\n  theme_minimal()\n\nWarning: Removed 3081 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\n\n\n\n\n\n\n\n\nplot_species &lt;- function(data, x_var, y_var, colour, species) {\n\n  filtered_data &lt;- \n    data |&gt; \n    filter(species_id == {{ species }})\n  \n  plot_title &lt;- paste0(y_var, \" vs. \", x_var, \" for Species ID: \", species)\n  \n  plot &lt;- \n    filtered_data |&gt; \n    ggplot(aes(x = .data[[x_var]], y = .data[[y_var]], colour = .data[[colour]])) +\n    geom_point(alpha = 0.6) +\n    theme_minimal()\n  \n  save_path &lt;- paste0(\"figures/\", species, \"_\", x_var, \"_vs_\", y_var, \".png\")\n  \n  ggsave(save_path, plot = plot, width = 10, height = 6, units = \"in\")\n}\n\nwalk(valid_species, ~ plot_species(\n  data = surveys,\n  x_var = \"weight\",\n  y_var = \"hindfoot_length\",\n  colour = \"sex\",\n  species = .x \n))\n\nWarning: Removed 674 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 153 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 469 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 167 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 87 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 106 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 78 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 94 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 42 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 41 rows containing missing values or values outside the scale range\n(`geom_point()`).\n\n\nWarning: Removed 122 rows containing missing values or values outside the scale range\n(`geom_point()`)."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Reproducible & Collaborative Data Science with R",
    "section": "",
    "text": "Dr Tom Saunders & Dr Toby Johnson\nCentre for eResearch\nUniversity of Auckland\nWelcome to the workshop repository for Reproducible & Collaborative Data Science with R.\n\nGetting Set Up\nFollow the instructions on the set up page to install some software and create a GitHub account before the workshop.\n\n\nObjectives\nThe primary objective of this workshop is to equip emerging researchers with practical skills to unlock the potential of their R scripts by making their code reproducible, shareable, and citable.\nMost R users do not have a background in computer science or software development, but instead come with expertise from particular research domains. This presents an opportunity to empower researchers to apply software development principles to the code they write to ensure their work has maximum impact. We will cover the following concepts in this workshop:\n\nOrganising work in projects\nWriting readable and modular R code\nCollaborating with version control\nManaging package dependencies\nPublishing software projects\n\nEach of these topics alone could easily fill a 1.5 hour workshop, so our treatment of them will necessarily be brief. But our main aim here is to introduce these concepts, show how they are used together, and walk through how to start applying them to your research projects."
  },
  {
    "objectID": "setup.html",
    "href": "setup.html",
    "title": "Set Up",
    "section": "",
    "text": "1. Install R (or update)\nIf using a device managed by your organisation, install R from your organisational software repository or contact your IT department for help.\nTo download and install R on a personal machine:\n\nWindows: Select ‘base’, then ‘Download R for Windows’. Run the installer\nMac:\nLinux\n\n\n\n2. Install RStudio (or update)\nIf using a device managed by your organisation, install RStudio from your organisational software repository or contact your IT department for help.\nTo download and install RStudio on a personal machine (requires administrator privileges):\n\nGo here and click ‘Download RStudio Desktop’ underneath ‘2: Install RStudio’, or scroll down and select the appropriate version for your operating system.\n\n\n\n3. Install R packages\nOpen RStudio and install the following R packages by:\n\nSelecting Tools &gt; Install Packages &gt; and entering readr, readxl, dplyr, ggplot2, renv and select ‘Install’.\n\nOR\n\nRunning the following command in the console:\n\ninstall.packages(c(\"readr\", \"readxl\", \"dplyr\", \"ggplot2\", \"renv\"))\n\n\n4. Install Git\nInstall Git on Windows:\n\nDownload and install Git for Windows.\nDuring installation, when asked about “Adjusting your PATH environment”, make sure to select “Git from the command line and also from 3rd-party software”. Otherwise, accept the default options.\n\nInstall Git on Mac:\n\nOpen the Terminal app, type git --version and press Enter/Return.\nIf it’s not installed already, follow the instructions to Install the “command line developer tools”.\nDo not click “Get Xcode” - it will take too long and is not necessary for our Git lesson.\n\nInstall Git on Linux:\n\nIf Git is not already available, install it via your package manager.\nFor Debian/Ubuntu run sudo apt-get install git and for Fedora run sudo dnf install git.\n\n\n\n5. Create a GitHub account\nGo to github.com and create a free account. If you use your organisational email address you may be eligible for a free upgrade to GitHub Education. If you would like to remain anonymous, choose an appropriate username and see these instructions for keeping your email address private."
  },
  {
    "objectID": "05_publishing.html",
    "href": "05_publishing.html",
    "title": "Publishing",
    "section": "",
    "text": "Using R or another programming language to analyse your data means all the steps you’ve taken to get from data to results are laid out in your script. Having your code in a public GitHub repo is a great way to share that code in a way that makes it easier for others to immediately reuse it. But by ‘publishing’ that code (by getting a DOI) you can gain even more visibility for your software, and ensure you get credit for it.\nWe’ll discuss two options for publishing your code. Both will get you a DOI so your code becomes citable."
  },
  {
    "objectID": "05_publishing.html#connect-your-github-repo-with-zenodo",
    "href": "05_publishing.html#connect-your-github-repo-with-zenodo",
    "title": "Publishing",
    "section": "1. Connect your GitHub repo with Zenodo",
    "text": "1. Connect your GitHub repo with Zenodo\nIf you already have a Zenodo account, you can connect your GitHub. If you don’t have an account already, log in to Zenodo with your GitHub account.\nThen go here and toggle the button next to the repo on. Zenodo will archive your repository (and will issue a new DOI each time you create a new GitHub release)."
  },
  {
    "objectID": "05_publishing.html#connect-your-github-repo-with-figshare",
    "href": "05_publishing.html#connect-your-github-repo-with-figshare",
    "title": "Publishing",
    "section": "2. Connect your GitHub repo with FigShare",
    "text": "2. Connect your GitHub repo with FigShare\nIf you already have a (personal or institutional) FigShare account, you can connect your GitHub. If you don’t have an account already, create one.\nThen go here and connect your GitHub account. Now when you go to create a new item, you can select ‘Import from connected integrations’ at the bottom of the upload wizard.\nNow when publishing a manuscript, you can cite the DOI for the code in the data availability statement, or in the reference section if the journal doesn’t use data availability statements."
  },
  {
    "objectID": "04_dependencies.html",
    "href": "04_dependencies.html",
    "title": "Managing Dependencies",
    "section": "",
    "text": "One of the benefits of using R to analyse data is gaining access to the incredible ecosystem of packages that have been developed to make it easier to perform all kinds of different analyses. Packages are often updated to fix bugs, add new functionality, or change existing functionality. Sometimes this means code breaks - something that used to work with a previous version of a package no longer works, so the code stops running. This can be frustrating and time consuming to fix. Fortunately, by smartly managing dependencies (the packages that our code depends on to work), we can largely avoid the problem."
  },
  {
    "objectID": "04_dependencies.html#introducing-renv",
    "href": "04_dependencies.html#introducing-renv",
    "title": "Managing Dependencies",
    "section": "Introducing renv",
    "text": "Introducing renv\nrenv (short for r environment) makes your R projects:\n\nIsolated: Installing a new or updated package for one project won’t break your other projects, and vice versa. That’s because renv gives each project its own private package library.\nPortable: Easily transport your projects from one computer to another, even across different platforms. renv makes it easy to install the packages your project depends on.\nReproducible: renv records the exact package versions you depend on, and ensures those exact versions are the ones that get installed wherever the project goes.\n\nrenv can be installed onto your machine like any other package at any time during the lifecycle of your project. In the console:\n\ninstall.packages(\"renv\")\n\nTo use renv in your project, in the console:\n\nrenv::init()\n\nThis will set up a project library in a folder called renv, containing all the packages you’re currently using. The packages (and all the metadata needed to reinstall them) are recorded into a lockfile, renv.lock, and a .Rprofile file ensures that the library is used every time you open that project.\nAs you work on your project, you will install and upgrade packages, either using install.packages() and update.packages() or renv::install() and renv::update(). After you’ve confirmed your code works as expected, use renv::snapshot() to record the packages and their sources in an updated lockfile.\nLater, if you need to share your code with someone else or run your code on new machine, your collaborator (or you) can call renv::restore() to install the specific package versions recorded in the lockfile.\nWhen we use renv commands we use the :: notation so we don’t actually have to load the renv package, and we always enter renv commands in the console. We don’t preserve them in our script.\nThe below graphic shows a diagram of the standard workflow:"
  },
  {
    "objectID": "04_dependencies.html#testing-it-out",
    "href": "04_dependencies.html#testing-it-out",
    "title": "Managing Dependencies",
    "section": "Testing it out",
    "text": "Testing it out\nRun renv::init() and you should see some activity in the console and you’ll see some new files in the Git pane.\nWe now have a renv.lock file that has recorded the packages, and their versions, that are loaded in our script (or loaded in any scripts within our project).\nLets install and load another package, as if we were going to use it in our script. In the console:\n\ninstall.packages(\"ratdat\")\n\nrenv should tell you in the console that it is going to download the package from CRAN and install it within the project/renv folder. You’ll need to hit Shift+Y to confirm. It downloads the package, installs it first into your general R package library, then moves a copy into the project/renv folder. Now let’s load it in our script as if we were going to use it.\n\nlibrary(\"ratdat\")\n\nLet’s pretend we used the package and were happy with our code. We can check the status of our project to see if renv has detected the new package.\n\nrenv::status()\n\nrenv should tell you that ratdat is installed and used, but not recorded in the lock file. To fix this we take a snapshot to update the lock file.\n\nrenv::snapshot()\n\nYou should be prompted to allow the lock file to be updated with the package (Shift+Y to confirm).\nAs we’re not actually using this package, we can remove it from our project by running:\n\nrenv::remove(\"\")\n\nAnd deleting the library(\"ratdat) call above. Now we can update our lock file again:\n\nrenv::snapshot()\n\nIf someone clones the project from GitHub, and they have renv installed, they can renv::restore() the packages within the lockfile so that these package versions will be installed into the project package library on their machine too. This means they have the same packages, and the same versions, installed in their project library as the person who created the code."
  }
]